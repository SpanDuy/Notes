{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { setAuthHeader } from './auth-headers';\nconst AuthProvider = _ref => {\n  _s();\n  let {\n    userManager: manager,\n    children\n  } = _ref;\n  let userManager = useRef();\n  useEffect(() => {\n    userManager.current = manager;\n    const onUserLoaded = user => {\n      console.log('User loaded: ', user);\n      setAuthHeader(user.access_token);\n    };\n    const onUserUnloaded = () => {\n      setAuthHeader(null);\n      console.log('User unloaded');\n    };\n    const onAccessTokenExpiring = () => {\n      console.log('User token expiring');\n    };\n    const onAccessTokenExpired = () => {\n      console.log('User token expired');\n    };\n    const onUserSignedOut = () => {\n      console.log('User signed out');\n    };\n    userManager.current.events.addUserLoaded(onUserLoaded);\n    userManager.current.events.addUserUnloaded(onUserUnloaded);\n    userManager.current.events.addAccessTokenExpiring(onAccessTokenExpiring);\n    userManager.current.events.addAccessTokenExpired(onAccessTokenExpired);\n    userManager.current.events.addUserSignedOut(onUserSignedOut);\n    return function cleanup() {\n      if (userManager && userManager.current) {\n        userManager.current.events.removeUserLoaded(onUserLoaded);\n        userManager.current.events.removeUserUnloaded(onUserUnloaded);\n        userManager.current.events.removeAccessTokenExpiring(onAccessTokenExpiring);\n        userManager.current.events.removeAccessTokenExpired(onAccessTokenExpired);\n        userManager.current.events.removeUserSignedOut(onUserSignedOut);\n      }\n    };\n  }, [manager]);\n  return React.Children.only(children);\n};\n_s(AuthProvider, \"VWqUvv0K1t4dGDG9CZJ1ntYhNi0=\");\n_c = AuthProvider;\nexport default AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useEffect","useRef","setAuthHeader","AuthProvider","_ref","_s","userManager","manager","children","current","onUserLoaded","user","console","log","access_token","onUserUnloaded","onAccessTokenExpiring","onAccessTokenExpired","onUserSignedOut","events","addUserLoaded","addUserUnloaded","addAccessTokenExpiring","addAccessTokenExpired","addUserSignedOut","cleanup","removeUserLoaded","removeUserUnloaded","removeAccessTokenExpiring","removeAccessTokenExpired","removeUserSignedOut","Children","only","_c","$RefreshReg$"],"sources":["C:/Users/user/Web/notes.frontend/src/auth/auth-provider.ts"],"sourcesContent":["import React, { FC, useEffect, useRef } from 'react';\r\nimport { User, UserManager } from 'oidc-client';\r\nimport { setAuthHeader } from './auth-headers';\r\n\r\ntype AuthProviderProps = {\r\n    userManager: UserManager;\r\n    children: React.ReactNode;\r\n};\r\n\r\nconst AuthProvider: FC<AuthProviderProps> = ({\r\n    userManager: manager,\r\n    children,\r\n}): any => {\r\n    let userManager = useRef<UserManager>();\r\n    useEffect(() => {\r\n        userManager.current = manager;\r\n        const onUserLoaded = (user: User) => {\r\n            console.log('User loaded: ', user);\r\n            setAuthHeader(user.access_token);\r\n        };\r\n        const onUserUnloaded = () => {\r\n            setAuthHeader(null);\r\n            console.log('User unloaded');\r\n        };\r\n        const onAccessTokenExpiring = () => {\r\n            console.log('User token expiring');\r\n        };\r\n        const onAccessTokenExpired = () => {\r\n            console.log('User token expired');\r\n        };\r\n        const onUserSignedOut = () => {\r\n            console.log('User signed out');\r\n        };\r\n\r\n        userManager.current.events.addUserLoaded(onUserLoaded);\r\n        userManager.current.events.addUserUnloaded(onUserUnloaded);\r\n        userManager.current.events.addAccessTokenExpiring(\r\n            onAccessTokenExpiring\r\n        );\r\n        userManager.current.events.addAccessTokenExpired(onAccessTokenExpired);\r\n        userManager.current.events.addUserSignedOut(onUserSignedOut);\r\n\r\n        return function cleanup() {\r\n            if (userManager && userManager.current) {\r\n                userManager.current.events.removeUserLoaded(onUserLoaded);\r\n                userManager.current.events.removeUserUnloaded(onUserUnloaded);\r\n                userManager.current.events.removeAccessTokenExpiring(\r\n                    onAccessTokenExpiring\r\n                );\r\n                userManager.current.events.removeAccessTokenExpired(\r\n                    onAccessTokenExpired\r\n                );\r\n                userManager.current.events.removeUserSignedOut(onUserSignedOut);\r\n            }\r\n        };\r\n    }, [manager]);\r\n\r\n    return React.Children.only(children);\r\n};\r\n\r\nexport default AuthProvider;"],"mappings":";AAAA,OAAOA,KAAK,IAAQC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEpD,SAASC,aAAa,QAAQ,gBAAgB;AAO9C,MAAMC,YAAmC,GAAGC,IAAA,IAGjC;EAAAC,EAAA;EAAA,IAHkC;IACzCC,WAAW,EAAEC,OAAO;IACpBC;EACJ,CAAC,GAAAJ,IAAA;EACG,IAAIE,WAAW,GAAGL,MAAM,CAAc,CAAC;EACvCD,SAAS,CAAC,MAAM;IACZM,WAAW,CAACG,OAAO,GAAGF,OAAO;IAC7B,MAAMG,YAAY,GAAIC,IAAU,IAAK;MACjCC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,IAAI,CAAC;MAClCT,aAAa,CAACS,IAAI,CAACG,YAAY,CAAC;IACpC,CAAC;IACD,MAAMC,cAAc,GAAGA,CAAA,KAAM;MACzBb,aAAa,CAAC,IAAI,CAAC;MACnBU,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAChC,CAAC;IACD,MAAMG,qBAAqB,GAAGA,CAAA,KAAM;MAChCJ,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACtC,CAAC;IACD,MAAMI,oBAAoB,GAAGA,CAAA,KAAM;MAC/BL,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;IACrC,CAAC;IACD,MAAMK,eAAe,GAAGA,CAAA,KAAM;MAC1BN,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAEDP,WAAW,CAACG,OAAO,CAACU,MAAM,CAACC,aAAa,CAACV,YAAY,CAAC;IACtDJ,WAAW,CAACG,OAAO,CAACU,MAAM,CAACE,eAAe,CAACN,cAAc,CAAC;IAC1DT,WAAW,CAACG,OAAO,CAACU,MAAM,CAACG,sBAAsB,CAC7CN,qBACJ,CAAC;IACDV,WAAW,CAACG,OAAO,CAACU,MAAM,CAACI,qBAAqB,CAACN,oBAAoB,CAAC;IACtEX,WAAW,CAACG,OAAO,CAACU,MAAM,CAACK,gBAAgB,CAACN,eAAe,CAAC;IAE5D,OAAO,SAASO,OAAOA,CAAA,EAAG;MACtB,IAAInB,WAAW,IAAIA,WAAW,CAACG,OAAO,EAAE;QACpCH,WAAW,CAACG,OAAO,CAACU,MAAM,CAACO,gBAAgB,CAAChB,YAAY,CAAC;QACzDJ,WAAW,CAACG,OAAO,CAACU,MAAM,CAACQ,kBAAkB,CAACZ,cAAc,CAAC;QAC7DT,WAAW,CAACG,OAAO,CAACU,MAAM,CAACS,yBAAyB,CAChDZ,qBACJ,CAAC;QACDV,WAAW,CAACG,OAAO,CAACU,MAAM,CAACU,wBAAwB,CAC/CZ,oBACJ,CAAC;QACDX,WAAW,CAACG,OAAO,CAACU,MAAM,CAACW,mBAAmB,CAACZ,eAAe,CAAC;MACnE;IACJ,CAAC;EACL,CAAC,EAAE,CAACX,OAAO,CAAC,CAAC;EAEb,OAAOR,KAAK,CAACgC,QAAQ,CAACC,IAAI,CAACxB,QAAQ,CAAC;AACxC,CAAC;AAACH,EAAA,CAjDIF,YAAmC;AAAA8B,EAAA,GAAnC9B,YAAmC;AAmDzC,eAAeA,YAAY;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}