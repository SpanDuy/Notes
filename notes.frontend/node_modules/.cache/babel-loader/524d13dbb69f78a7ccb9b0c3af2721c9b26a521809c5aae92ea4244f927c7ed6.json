{"ast":null,"code":"import { UserManager } from 'oidc-client';\nimport { setAuthHeader } from './auth-headers';\nconst userManagerSettings = {\n  client_id: 'notes-web-app',\n  redirect_uri: 'http://localhost:3001/signin-oidc',\n  response_type: 'code',\n  scope: 'openid profile NotesWebAPI',\n  authority: 'https://localhost:44386/',\n  post_logout_redirect_uri: 'http://localhost:3001/signout-oidc'\n};\nconst userManager = new UserManager(userManagerSettings);\nexport async function loadUser() {\n  const user = await userManager.getUser();\n  console.log('User: ', user);\n  const token = user === null || user === void 0 ? void 0 : user.access_token;\n  setAuthHeader(token);\n}\nexport const signinRedirect = () => userManager.signinRedirect();\nexport const signinRedirectCallback = () => userManager.signinRedirectCallback();\nexport const signoutRedirect = args => {\n  userManager.clearStaleState();\n  userManager.removeUser();\n  return userManager.signoutRedirect(args);\n};\nexport const signoutRedirectCallback = () => {\n  userManager.clearStaleState();\n  userManager.removeUser();\n  return userManager.signoutRedirectCallback();\n};\nexport default userManager;","map":{"version":3,"names":["UserManager","setAuthHeader","userManagerSettings","client_id","redirect_uri","response_type","scope","authority","post_logout_redirect_uri","userManager","loadUser","user","getUser","console","log","token","access_token","signinRedirect","signinRedirectCallback","signoutRedirect","args","clearStaleState","removeUser","signoutRedirectCallback"],"sources":["C:/Users/user/Web/notes.frontend/src/auth/user-service.ts"],"sourcesContent":["import { UserManager, UserManagerSettings } from 'oidc-client';\r\nimport { setAuthHeader } from './auth-headers';\r\n\r\nconst userManagerSettings: UserManagerSettings = {\r\n    client_id: 'notes-web-app',\r\n    redirect_uri: 'http://localhost:3001/signin-oidc',\r\n    response_type: 'code',\r\n    scope: 'openid profile NotesWebAPI',\r\n    authority: 'https://localhost:44386/',\r\n    post_logout_redirect_uri: 'http://localhost:3001/signout-oidc',\r\n};\r\n\r\nconst userManager = new UserManager(userManagerSettings);\r\nexport async function loadUser() {\r\n    const user = await userManager.getUser();\r\n    console.log('User: ', user);\r\n    const token = user?.access_token;\r\n    setAuthHeader(token);\r\n}\r\n\r\nexport const signinRedirect = () => userManager.signinRedirect();\r\n\r\nexport const signinRedirectCallback = () =>\r\n    userManager.signinRedirectCallback();\r\n\r\nexport const signoutRedirect = (args?: any) => {\r\n    userManager.clearStaleState();\r\n    userManager.removeUser();\r\n    return userManager.signoutRedirect(args);\r\n};\r\n\r\nexport const signoutRedirectCallback = () => {\r\n    userManager.clearStaleState();\r\n    userManager.removeUser();\r\n    return userManager.signoutRedirectCallback();\r\n};\r\n\r\nexport default userManager;"],"mappings":"AAAA,SAASA,WAAW,QAA6B,aAAa;AAC9D,SAASC,aAAa,QAAQ,gBAAgB;AAE9C,MAAMC,mBAAwC,GAAG;EAC7CC,SAAS,EAAE,eAAe;EAC1BC,YAAY,EAAE,mCAAmC;EACjDC,aAAa,EAAE,MAAM;EACrBC,KAAK,EAAE,4BAA4B;EACnCC,SAAS,EAAE,0BAA0B;EACrCC,wBAAwB,EAAE;AAC9B,CAAC;AAED,MAAMC,WAAW,GAAG,IAAIT,WAAW,CAACE,mBAAmB,CAAC;AACxD,OAAO,eAAeQ,QAAQA,CAAA,EAAG;EAC7B,MAAMC,IAAI,GAAG,MAAMF,WAAW,CAACG,OAAO,CAAC,CAAC;EACxCC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEH,IAAI,CAAC;EAC3B,MAAMI,KAAK,GAAGJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,YAAY;EAChCf,aAAa,CAACc,KAAK,CAAC;AACxB;AAEA,OAAO,MAAME,cAAc,GAAGA,CAAA,KAAMR,WAAW,CAACQ,cAAc,CAAC,CAAC;AAEhE,OAAO,MAAMC,sBAAsB,GAAGA,CAAA,KAClCT,WAAW,CAACS,sBAAsB,CAAC,CAAC;AAExC,OAAO,MAAMC,eAAe,GAAIC,IAAU,IAAK;EAC3CX,WAAW,CAACY,eAAe,CAAC,CAAC;EAC7BZ,WAAW,CAACa,UAAU,CAAC,CAAC;EACxB,OAAOb,WAAW,CAACU,eAAe,CAACC,IAAI,CAAC;AAC5C,CAAC;AAED,OAAO,MAAMG,uBAAuB,GAAGA,CAAA,KAAM;EACzCd,WAAW,CAACY,eAAe,CAAC,CAAC;EAC7BZ,WAAW,CAACa,UAAU,CAAC,CAAC;EACxB,OAAOb,WAAW,CAACc,uBAAuB,CAAC,CAAC;AAChD,CAAC;AAED,eAAed,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}